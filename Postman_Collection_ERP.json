{
	"info": {
		"_postman_id": "erp-system-2025",
		"name": "Sistema ERP Completo - Laravel",
		"description": "API completa para el sistema ERP con Proveedores, Compras, Cotizaciones e Inventario",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": " Autenticaci贸n",
			"item": [
				{
					"name": "Login Admin",
					"event": [
						{
							"listen": "test",
							"script": {
									"exec": [
										"if (pm.response.code === 200) {",
										"    const response = pm.response.json();",
										"    if (response.access_token) {",
										"        pm.environment.set('auth_token', response.access_token);",
										"        console.log('Token guardado:', response.access_token);",
										"    } else if (response.token) {",
										"        pm.environment.set('auth_token', response.token);",
										"        console.log('Token guardado:', response.token);",
										"    } else {",
										"        console.error('No se encontr贸 el token en la respuesta');",
										"    }",
										"} else {",
										"    console.error('Login fallido, c贸digo:', pm.response.code);",
										"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin@invoice.com\",\n    \"password\": \"admin123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						}
					}
				},
				{
					"name": "Perfil Usuario",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/auth/profile",
							"host": ["{{base_url}}"],
							"path": ["auth", "profile"]
						}
					}
				}
			]
		},
		{
			"name": " Proveedores",
			"item": [
				{
					"name": "Listar Proveedores",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/suppliers?per_page=10&active=true",
							"host": ["{{base_url}}"],
							"path": ["suppliers"],
							"query": [
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "active",
									"value": "true"
								},
								{
									"key": "search",
									"value": "",
									"disabled": true
								}
							]
						}
					}
				},
				{
					"name": "Crear Proveedor",
					"event": [
						{
							"listen": "test",
							"script": {
									"exec": [
										"if (pm.response.code === 201) {",
										"    const response = pm.response.json();",
										"    let id = null;",
										"    if (response.data && response.data.id) { id = response.data.id; }",
										"    else if (response.id) { id = response.id; }",
										"    else if (typeof response === 'object') {",
										"        for (let k in response) { if (typeof response[k] === 'number') { id = response[k]; break; } }",
										"    }",
										"    if (id) {",
										"        pm.environment.set('supplier_id', id);",
										"        console.log('Proveedor creado con ID:', id);",
										"    } else {",
										"        console.error('No se encontr贸 el ID de proveedor en la respuesta');",
										"    }",
										"} else {",
										"    console.error('Creaci贸n de proveedor fallida, c贸digo:', pm.response.code);",
										"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Proveedor ABC S.A.\",\n    \"email\": \"proveedor{{$randomInt}}@test.com\",\n    \"phone\": \"555-{{randomInt}}\",\n    \"address\": \"Av. Principal {{randomInt}}, Ciudad\",\n    \"contact_person\": \"Juan P茅rez\",\n    \"tax_id\": \"TAX{{randomInt}}\",\n    \"notes\": \"Proveedor principal de insumos\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/suppliers",
							"host": ["{{base_url}}"],
							"path": ["suppliers"]
						}
					}
				},
				{
					"name": "Ver Proveedor",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/suppliers/{{supplier_id}}",
							"host": ["{{base_url}}"],
							"path": ["suppliers", "{{supplier_id}}"]
						}
					}
				},
				{
					"name": "Actualizar Proveedor",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Proveedor ABC S.A. - Actualizado\",\n    \"phone\": \"555-0124\",\n    \"notes\": \"Proveedor actualizado\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/suppliers/{{supplier_id}}",
							"host": ["{{base_url}}"],
							"path": ["suppliers", "{{supplier_id}}"]
						}
					}
				},
				{
					"name": "Proveedores Activos (Select)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/suppliers-active",
							"host": ["{{base_url}}"],
							"path": ["suppliers-active"]
						}
					}
				},
				{
					"name": "Activar/Desactivar Proveedor",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/suppliers/{{supplier_id}}/toggle-status",
							"host": ["{{base_url}}"],
							"path": ["suppliers", "{{supplier_id}}", "toggle-status"]
						}
					}
				}
			]
		},
		{
			"name": " Productos",
			"item": [
				{
					"name": "Listar Productos",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/products?per_page=10",
							"host": ["{{base_url}}"],
							"path": ["products"],
							"query": [
								{
									"key": "per_page",
									"value": "10"
								}
							]
						}
					}
				},
				{
					"name": "Crear Producto",
					"event": [
						{
							"listen": "test",
							"script": {
									"exec": [
										"if (pm.response.code === 201) {",
										"    const response = pm.response.json();",
										"    let id = null;",
										"    if (response.data && response.data.id) { id = response.data.id; }",
										"    else if (response.id) { id = response.id; }",
										"    else if (typeof response === 'object') {",
										"        for (let k in response) { if (typeof response[k] === 'number') { id = response[k]; break; } }",
										"    }",
										"    if (id) {",
										"        pm.environment.set('product_id', id);",
										"        console.log('Producto creado con ID:', id);",
										"    } else {",
										"        console.error('No se encontr贸 el ID de producto en la respuesta');",
										"    }",
										"} else {",
										"    console.error('Creaci贸n de producto fallida, c贸digo:', pm.response.code);",
										"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Producto ERP {{$randomInt}}\",\n    \"description\": \"Producto para probar el sistema ERP\",\n    \"price\": 25.99,\n    \"stock\": 100,\n    \"type\": \"product\",\n    \"sku\": \"PROD-{{randomInt}}\",\n    \"cost_price\": 15.50\n}"
						},
						"url": {
							"raw": "{{base_url}}/products",
							"host": ["{{base_url}}"],
							"path": ["products"]
						}
					}
				}
			]
		},
		{
			"name": " Compras",
			"item": [
				{
					"name": "Listar Compras",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/purchases?per_page=10",
							"host": ["{{base_url}}"],
							"path": ["purchases"],
							"query": [
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "status",
									"value": "",
									"disabled": true
								},
								{
									"key": "supplier_id",
									"value": "",
									"disabled": true
								}
							]
						}
					}
				},
				{
					"name": "Crear Compra",
					"event": [
						{
							"listen": "test",
							"script": {
									"exec": [
										"if (pm.response.code === 201) {",
										"    const response = pm.response.json();",
										"    let id = null;",
										"    if (response.data && response.data.id) { id = response.data.id; }",
										"    else if (response.id) { id = response.id; }",
										"    else if (typeof response === 'object') {",
										"        for (let k in response) { if (typeof response[k] === 'number') { id = response[k]; break; } }",
										"    }",
										"    if (id) {",
										"        pm.environment.set('purchase_id', id);",
										"        console.log('Compra creada con ID:', id);",
										"    } else {",
										"        console.error('No se encontr贸 el ID de compra en la respuesta');",
										"    }",
										"} else {",
										"    console.error('Creaci贸n de compra fallida, c贸digo:', pm.response.code);",
										"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"supplier_id\": {{supplier_id}},\n    \"purchase_date\": \"2025-10-09\",\n    \"notes\": \"Compra de prueba del sistema ERP\",\n    \"items\": [\n        {\n            \"product_id\": {{product_id}},\n            \"quantity\": 50,\n            \"cost_price\": 15.00\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/purchases",
							"host": ["{{base_url}}"],
							"path": ["purchases"]
						}
					}
				},
				{
					"name": "Ver Compra",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/purchases/{{purchase_id}}",
							"host": ["{{base_url}}"],
							"path": ["purchases", "{{purchase_id}}"]
						}
					}
				},
				{
					"name": "Recibir Mercanc铆a",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/purchases/{{purchase_id}}/receive",
							"host": ["{{base_url}}"],
							"path": ["purchases", "{{purchase_id}}", "receive"]
						}
					}
				},
				{
					"name": "Estad铆sticas de Compras",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/purchases-stats?date_from=2025-10-01&date_to=2025-10-31",
							"host": ["{{base_url}}"],
							"path": ["purchases-stats"],
							"query": [
								{
									"key": "date_from",
									"value": "2025-10-01"
								},
								{
									"key": "date_to",
									"value": "2025-10-31"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": " Clientes",
			"item": [
				{
					"name": "Crear Cliente",
					"event": [
						{
							"listen": "test",
							"script": {
									"exec": [
										"if (pm.response.code === 201) {",
										"    const response = pm.response.json();",
										"    let id = null;",
										"    if (response.data && response.data.id) { id = response.data.id; }",
										"    else if (response.id) { id = response.id; }",
										"    else if (typeof response === 'object') {",
										"        for (let k in response) { if (typeof response[k] === 'number') { id = response[k]; break; } }",
										"    }",
										"    if (id) {",
										"        pm.environment.set('customer_id', id);",
										"        console.log('Cliente creado con ID:', id);",
										"    } else {",
										"        console.error('No se encontr贸 el ID de cliente en la respuesta');",
										"    }",
										"} else {",
										"    console.error('Creaci贸n de cliente fallida, c贸digo:', pm.response.code);",
										"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Cliente ERP {{$randomInt}}\",\n    \"email\": \"cliente{{$randomInt}}@test.com\",\n    \"phone\": \"555-{{randomInt}}\",\n    \"address\": \"Calle Falsa {{randomInt}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/customers",
							"host": ["{{base_url}}"],
							"path": ["customers"]
						}
					}
				}
			]
		},
		{
			"name": " Cotizaciones",
			"item": [
				{
					"name": "Listar Cotizaciones",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/quotes?per_page=10",
							"host": ["{{base_url}}"],
							"path": ["quotes"],
							"query": [
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "status",
									"value": "",
									"disabled": true
								},
								{
									"key": "customer_id",
									"value": "",
									"disabled": true
								}
							]
						}
					}
				},
				{
					"name": "Crear Cotizaci贸n",
					"event": [
						{
							"listen": "test",
							"script": {
									"exec": [
										"if (pm.response.code === 201) {",
										"    const response = pm.response.json();",
										"    let id = null;",
										"    if (response.data && response.data.id) { id = response.data.id; }",
										"    else if (response.id) { id = response.id; }",
										"    else if (typeof response === 'object') {",
										"        for (let k in response) { if (typeof response[k] === 'number') { id = response[k]; break; } }",
										"    }",
										"    if (id) {",
										"        pm.environment.set('quote_id', id);",
										"        console.log('Cotizaci贸n creada con ID:', id);",
										"    } else {",
										"        console.error('No se encontr贸 el ID de cotizaci贸n en la respuesta');",
										"    }",
										"} else {",
										"    console.error('Creaci贸n de cotizaci贸n fallida, c贸digo:', pm.response.code);",
										"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"customer_id\": {{customer_id}},\n    \"quote_date\": \"2025-10-09\",\n    \"valid_until\": \"2025-10-30\",\n    \"notes\": \"Cotizaci贸n de prueba del sistema ERP\",\n    \"items\": [\n        {\n            \"product_id\": {{product_id}},\n            \"quantity\": 10,\n            \"price\": 25.99\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/quotes",
							"host": ["{{base_url}}"],
							"path": ["quotes"]
						}
					}
				},
				{
					"name": "Ver Cotizaci贸n",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/quotes/{{quote_id}}",
							"host": ["{{base_url}}"],
							"path": ["quotes", "{{quote_id}}"]
						}
					}
				},
				{
					"name": "Enviar Cotizaci贸n",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/quotes/{{quote_id}}/send",
							"host": ["{{base_url}}"],
							"path": ["quotes", "{{quote_id}}", "send"]
						}
					}
				},
				{
					"name": "Aprobar Cotizaci贸n",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/quotes/{{quote_id}}/approve",
							"host": ["{{base_url}}"],
							"path": ["quotes", "{{quote_id}}", "approve"]
						}
					}
				},
				{
					"name": "Convertir a Factura",
					"event": [
						{
							"listen": "test",
							"script": {
									"exec": [
										"if (pm.response.code === 200) {",
										"    const response = pm.response.json();",
										"    if (response.data && response.data.invoice && response.data.invoice.id) {",
										"        pm.environment.set('invoice_id', response.data.invoice.id);",
										"        console.log('Factura creada con ID:', response.data.invoice.id);",
										"    } else {",
										"        console.error('No se encontr贸 el ID de factura en la respuesta');",
										"    }",
										"} else {",
										"    console.error('Conversi贸n a factura fallida, c贸digo:', pm.response.code);",
										"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/quotes/{{quote_id}}/convert-to-invoice",
							"host": ["{{base_url}}"],
							"path": ["quotes", "{{quote_id}}", "convert-to-invoice"]
						}
					}
				},
				{
					"name": "Estad铆sticas de Cotizaciones",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/quotes-stats?date_from=2025-10-01&date_to=2025-10-31",
							"host": ["{{base_url}}"],
							"path": ["quotes-stats"],
							"query": [
								{
									"key": "date_from",
									"value": "2025-10-01"
								},
								{
									"key": "date_to",
									"value": "2025-10-31"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": " Inventario",
			"item": [
				{
					"name": "Movimientos de Inventario",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/inventory-movements?per_page=20",
							"host": ["{{base_url}}"],
							"path": ["inventory-movements"],
							"query": [
								{
									"key": "per_page",
									"value": "20"
								},
								{
									"key": "product_id",
									"value": "",
									"disabled": true
								},
								{
									"key": "type",
									"value": "",
									"disabled": true
								}
							]
						}
					}
				},
				{
					"name": "Crear Ajuste de Inventario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"product_id\": {{product_id}},\n    \"quantity\": 25,\n    \"notes\": \"Ajuste manual de inventario - producto encontrado en almac茅n\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/inventory-adjustments",
							"host": ["{{base_url}}"],
							"path": ["inventory-adjustments"]
						}
					}
				},
				{
					"name": "Resumen de Inventario",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/inventory-summary",
							"host": ["{{base_url}}"],
							"path": ["inventory-summary"],
							"query": [
								{
									"key": "type",
									"value": "",
									"disabled": true
								},
								{
									"key": "low_stock",
									"value": "true",
									"disabled": true
								}
							]
						}
					}
				},
				{
					"name": "Estad铆sticas de Movimientos",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/inventory-stats?date_from=2025-10-01&date_to=2025-10-31",
							"host": ["{{base_url}}"],
							"path": ["inventory-stats"],
							"query": [
								{
									"key": "date_from",
									"value": "2025-10-01"
								},
								{
									"key": "date_to",
									"value": "2025-10-31"
								}
							]
						}
					}
				},
				{
					"name": "Alertas de Inventario",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/inventory-alerts",
							"host": ["{{base_url}}"],
							"path": ["inventory-alerts"]
						}
					}
				},
				{
					"name": "Movimientos por Producto",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/inventory-movements/product/{{product_id}}?per_page=15",
							"host": ["{{base_url}}"],
							"path": ["inventory-movements", "product", "{{product_id}}"],
							"query": [
								{
									"key": "per_page",
									"value": "15"
								},
								{
									"key": "type",
									"value": "",
									"disabled": true
								}
							]
						}
					}
				}
			]
		},
		{
			"name": " Facturas",
			"item": [
				{
					"name": "Ver Factura",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/invoices/{{invoice_id}}",
							"host": ["{{base_url}}"],
							"path": ["invoices", "{{invoice_id}}"]
						}
					}
				},
				{
					"name": "Listar Facturas",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/invoices?per_page=10",
							"host": ["{{base_url}}"],
							"path": ["invoices"],
							"query": [
								{
									"key": "per_page",
									"value": "10"
								}
							]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000/api"
		}
	]
}